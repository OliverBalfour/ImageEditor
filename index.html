<!DOCTYPE html>
<html lang='en'>
	<head>
		<title>Image Editor</title>
		<meta charset='utf-8'>
		<link rel='stylesheet' type='text/css' href='index.css'>
		<link rel='stylesheet' type='text/css' href='ui.css'>
	</head>
	<body>
		<object id='tablet-api' type='application/x-wacomtabletplugin'></object>
		<div class='menu'>
			<ul class='menu-bar'>
				<li>
					<span>File</span>
					<ul class='submenu'>
						<li><span onclick="alert('TODO')">New</span></li>
						<li><span onclick="alert('TODO')">Open</span></li>
						<li><a download='image'><span onclick='exportImageAs(this, "last")'>Save (Ctrl+S)</span></a></li>
						<li>
							<span>Save as<p>&#10093;</p></span>
							<ul class='submenu'>
								<li><a download='image.png'><span onclick='exportImageAs(this, "png")'>png</span></a></li>
								<li><a download='image.jpg'><span onclick='exportImageAs(this, "jpg")'>jpg</span></a></li>
							</ul>
						</li>
					</ul>
				</li>
				<li>
					<span>Edit</span>
					<ul class='submenu'>
						<li><span onclick='croquis.undo()'>Undo (Ctrl+Z)</li>
						<li><span onclick='croquis.redo()'>Redo (Ctrl+Y)</li>
					</ul>
				</li>
				<li>
					<span>View</span>
					<ul class='submenu'>
						<li><span onclick="alert('TODO')">Toggle fullscreen</span></li>
						<li><span onclick="alert('TODO')">Show tool bar</span></li>
						<li><span onclick="alert('TODO')">Show tool options</span></li>
						<li><span onclick="alert('TODO')">Show status bar</span></li>
						<li><span onclick="alert('TODO')">Zoom in</span></li>
						<li><span onclick="alert('TODO')">Zoom out</span></li>
					</ul>
				</li>
				<li>
					<span>Image</span>
					<ul class='submenu'>
						<li>
							<span>Rotate<p>&#10093;</p></span>
							<ul class='submenu'>
								<li><span onclick="alert('TODO')">90&#176; (clockwise)</li>
								<li><span onclick="alert('TODO')">180&#176;</li>
								<li><span onclick="alert('TODO')">270&#176;</li>
							</ul>
						</li>
						<li><span onclick="alert('TODO')">Resize canvas</span></li>
					</ul>
				</li>
				<li>
					<span>Layer</span>
					<ul class='submenu'>
						<li><span onclick="alert('TODO')">New layer</span></li>
						<li><span onclick="alert('TODO')">Delete active layer</span></li>
						<li><span onclick="alert('TODO')">Merge layers</span></li>
					</ul>
				</li>
				<li>
					<span>Filter</span>
					<ul class='submenu'>
						<li><span onclick="alert('TODO')">Gaussian blur</span></li>
						<li><span onclick="alert('TODO')">Sobel edge detection</span></li>
						<li><span onclick="alert('TODO')">Saturate/ Desaturate</span></li>
						<li><span onclick="alert('TODO')">Greyscale</span></li>
						<li><span onclick="alert('TODO')">Hue shift</span></li>
					</ul>
				</li>
				<li>
					<span>Help</span>
					<ul class='submenu'>
						<li><span onclick='openModal("modal-about")'>About</span></li>
						<li><span><a href='https://github.com/Tobsta/ImageEditor' target='_blank'>Source code</a></span></li>
					</ul>
				</li>
			</ul>
			<span style='color: #1B2E2E; float: right; padding: 2px'>Image Editor</span>
		</div>
		<div class='toolbar'>
			<button onclick='changeTool(this)' title='Hotkey: P or N' data-tool='pen'>Pen</button>
			<button onclick='changeTool(this)' title='Hotkey: L' data-tool='line'>Line</button>
			<button onclick='changeTool(this)' title='Hotkey: E' data-tool='eraser'>Eraser</button>
			<button onclick='changeTool(this)' title='Hotkey: C or O' data-tool='picker'>Eyedropper</button>
		</div>
		<div class='tool-options'>
			<span class='colour-picker-preview'>
				<span style='color: white; background: black;'>#000000</span>
			</span>
			<div class='picker'></div>

			<fieldset>
				<legend>Layers</legend>
				<div class='layers-shelf'></div>
				<div class='new-layer-button small-button' onclick='addLayer()'>+</div>
			</fieldset>

			<fieldset>
				<legend>Render options</legend>
				<div id='tool-shelf'>
					<span title='Higher stabilizer level makes lines smoother'>Stabilizer level: <code class='js-render-stabilizer'></code></span>
					<input type='range' class='render-stabilizer' min='3' max='20'>

					<span title='Higher weight slows rendering down'>Weight: <code class='js-render-weight'></code></span>
					<input type='range' class='render-weight' min='0' max='80'>
				</div>
			</fieldset>
			<fieldset>
				<legend>Brush</legend>
				<div id='brush-image-shelf'>
					<img src='./brush/pixel.png' class='brush-image' data-flow='100' data-spacing='20'></img>
					<div class='brush-image circle-brush on' data-flow='100' data-spacing='20'></div>
					<div class='brush-image circle-brush' data-flow='4' data-spacing='2'></div>
					<img src='./brush/25.png' class='brush-image' data-flow='100' data-spacing='10'></img>
					<img src='./brush/50.png' class='brush-image' data-flow='100' data-spacing='10'></img>
					<img src='./brush/75.png' class='brush-image' data-flow='100' data-spacing='10'></img>
					<img src='./brush/b0.png' class='brush-image' data-flow='100' data-spacing='20'></img>
					<img src='./brush/b1.png' class='brush-image' data-flow='100' data-spacing='20'></img>
					<img src='./brush/b2.png' class='brush-image' data-flow='100' data-spacing='20'></img>
					<img src='./brush/b3.png' class='brush-image' data-flow='100' data-spacing='20'></img>
					<img src='./brush/b4.png' class='brush-image' data-flow='100' data-spacing='20'></img>
					<img src='./brush/b5.png' class='brush-image' data-flow='100' data-spacing='100' data-rotate='true'></img>
					<img src='./brush/acrylic1.png' class='brush-image' data-flow='50' data-spacing='20'></img>
					<img src='./brush/acrylic2.png' class='brush-image' data-flow='50' data-spacing='20'></img>
					<img src='./brush/acrylic3.png' class='brush-image' data-flow='50' data-spacing='20'></img>
					<img src='./brush/acrylic4.png' class='brush-image' data-flow='50' data-spacing='20'></img>
					<img src='./brush/acrylic5.png' class='brush-image' data-flow='50' data-spacing='20'></img>
					<img src='./brush/chalk1.png' class='brush-image' data-flow='50' data-spacing='20'></img>
					<img src='./brush/chalk2.png' class='brush-image' data-flow='50' data-spacing='20'></img>
					<img src='./brush/chalk3.png' class='brush-image' data-flow='50' data-spacing='20'></img>
					<img src='./brush/charcoal1.png' class='brush-image' data-flow='50' data-spacing='20'></img>
					<img src='./brush/charcoal2.png' class='brush-image' data-flow='50' data-spacing='20'></img>
					<div class='new-brush-button small-button' onclick='uploadBrush()'>+</div>
				</div>
			</fieldset>
			<fieldset id='brush-shelf'>
				<legend>Brush options</legend>

				<span>Opacity: <code class='js-brush-opacity'></code></span>
				<input type='range' class='brush-opacity' min='0' max='100'>

				<span>Thickness: <code class='js-brush-size'></code></span>
				<input type='range' class='brush-size' min='0.1' max='100' step='0.1'>

				<span>Flow: <code class='js-brush-flow'></code></span>
				<input type='range' class='brush-flow' min='0' max='100'>

				<span>Spacing: <code class='js-brush-spacing'></code></span>
				<input type='range' class='brush-spacing' min='0' max='100'>

				<span>Angle: <code class='js-brush-angle'></code></span>
				<input type='range' class='brush-angle' min='0' max='360'>

				<span>Rotate to direction</span>
				<input type='checkbox' class='brush-rotate'>
			</fieldset>
			<fieldset>
				<legend>Actions</legend>
				<button type='button' onclick='clearLayer()'>Erase all</button>
				<button type='button' onclick='fillLayer()'>Fill layer</button>
			</fieldset>
		</div>
		<div class='footer'>
			Footer
			<span class='js-x-coord'></span>
			<span class='js-y-coord'></span>
		</div>
		<div class='canvases'>
		</div>
		<div class='modals hidden'>
			<div class='modal hidden modal-image-upload'>
				<div class='modal-close small-button' onclick='closeModal("modal-image-upload")'>&times;</div>
				<h2></h2><p></p>
				<input type='file' class='image-upload-input' accept='image/*'>
				<br>
				<button onclick='uploadImage()'>Done</button>
			</div>
			<div class='modal hidden modal-about'>
				<div class='modal-close small-button' onclick='closeModal("modal-about")'>&times;</div>
				<h2>About</h2>
				<p>
					Simple HTML5 Canvas based image editor designed for the web and ChromeOS.
				</p>
				<p>
					Dependencies:
					<ul>
						<li><a href='https://github.com/disjukr/croquis.js'>croquis.js</a> (for brush implementation)</li>
						<li><a href='https://github.com/bgrins/TinyColor'>tinycolor.js</a> (for colour manipulation)</li>
						<li><a href='https://craig.is/killing/mice'>mousetrap.js</a> (for keyboard shortcuts)</li>
					</ul>
				</p>
				<p>Copyright Oliver Balfour, 2018. <a href='https://github.com/Tobsta/ImageEditor' target='_blank'>Source code</a></p>
			</div>
		</div>

		<script src='./colourpicker/colour-picker.js'></script>
		<script src='./croquis/croquis.js'></script>
		<script src='./mousetrap/mousetrap.min.js'></script>
		<script src='./tinycolor/dist/tinycolor-min.js'></script>

		<script type='text/javascript' src='index.js'></script>
	</body>
</html>
